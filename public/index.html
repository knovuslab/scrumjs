<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" lang="en">
	<title>scrub</title>
	<link rel="stylesheet" href="./css/style.css">

</head>

<body onload="init()">
	<div class="body">
		<div class="loading"></div>
		<div class="add" onclick="openForm()" style="width: 40px; height: 40px; margin: 0;">+</div>

		<section class="form-popup" id="addForm">
			<span class="closebtn cancel btn" onclick="closeForm()">&#215;</span>
			<div class="form-container">
				<h1 class="addTask">Add Task</h1>

				<input type="text" name="task" id="task" placeholder="Task" required>
				<textarea type="text" name="description" id="description" placeholder="Explanation"></textarea><br>
				<label for="status" id="task-status">Status</label>
				<select name="status" id="status" required>

					<option value="puts">Puts</option>
					<option value="ice-box">Ice Box</option>
					<option value="in-progress">In Progress</option>
					<option value="emergency">Emergency</option>
					<option value="testing">Testing</option>
					<option value="finished">Finished</option>
				</select>
				<button onclick="addTask()" class="btn submit">Add</button>
			</div>
		</section>
		<div class="panels">
			<div class="panel panel1 puts">
				<h2>Puts</h2>
				<div data-progress='0' ondragover="allowDrop(event)" ondrop="drop(event)" id="content-puts">
				</div>

			</div>
			<div class="panel panel2 ice-box">
				<h2>Ice-box</h2>
				<div data-progress='1' ondragover="allowDrop(event)" ondrop="drop(event)" id="content-ice-box"></div>
			</div>
			<div class="panel panel3 in-progress">
				<h2>In-progress</h2>
				<div data-progress='2' ondragover="allowDrop(event)" ondrop="drop(event)" id="content-in-progress">
				</div>
			</div>
			<div class="panel panel4 emergency">
				<h2>Emergency</h2>
				<div data-progress='3' ondragover="allowDrop(event)" ondrop="drop(event)" id="content-emergency"></div>
			</div>
			<div class="panel panel5 testing">
				<h2>Testing</h2>
				<div data-progress='4' ondragover="allowDrop(event)" ondrop="drop(event)" id="content-testing"></div>
			</div>
			<div class="panel panel6 finished">
				<h2>Finsihed</h2>
				<div data-progress='5' ondragover="allowDrop(event)" ondrop="drop(event)" id="content-finished"></div>
			</div>
		</div>
	</div>
	<div class="user">Hello, <span id="username"></span></div>
	<script src="/js/main.js"></script>
	<script>
		const panels = document.querySelectorAll('.panel');

		function toggleOpen() {
			this.classList.toggle('open');
		}

		function toggleActive(e) {
			if (e.propertyName.includes('flex')) this.classList.toggle('open-active');
		}
		panels.forEach((panel) => panel.addEventListener('click', toggleOpen))
		panels.forEach((panel) => panel.addEventListener('transitionend', toggleActive));

		function init() {
			displayCards();
			getUser();
		}
	</script>
</body>


</html>